{
  "hooks": {
    "PreCompact": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "IMPORTANT: Context compaction is about to occur. Before it happens, save all conversation state to persistent memory. Follow these steps in order:\n\n1. Dispatch the memory-manager agent to update all memory files in .claude/memory/ (users.md, topics.md, relationships.md, action-items.md) with context from the current conversation.\n\n2. After memory-manager completes, dispatch the personality-evolver agent to absorb a new personality trait from a randomly selected recent chat participant.\n\n3. Confirm both agents have completed before allowing compaction to proceed.\n\nThis is critical - any conversation context not saved to memory files will be lost during compaction."
          }
        ]
      }
    ]
  }
}
